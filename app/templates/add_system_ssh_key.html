{% extends "base.html" %}
{% block title %}Add System SSH Key{% endblock %}

{% block content %}
<div class="card">
  <div class="card-header">
    <h3 class="card-title">Add System SSH Key</h3>
  </div>
  <div class="card-body">
    <form method="post" action="/admin/system-ssh-keys/add">
      <div class="mb-3">
        <label for="key_name" class="form-label">Key Name</label>
        <input type="text" class="form-control" id="key_name" name="key_name" required>
      </div>

      <div class="mb-3">
        <label for="key_data" class="form-label">Private Key</label>
        <textarea class="form-control" id="key_data" name="key_data" rows="6" required></textarea>
      </div>

      <div class="mb-3 form-check">
        <input type="checkbox" class="form-check-input" id="no_password_checkbox" onclick="togglePasswordField()">
        <label class="form-check-label" for="no_password_checkbox">No password protection</label>
      </div>

      <div class="mb-3">
        <label for="key_password" class="form-label">Key Password (if applicable)</label>
        <input type="password" class="form-control" id="key_password" name="key_password">
      </div>

      <div class="mb-3">
        <label for="comment" class="form-label">Comment</label>
        <textarea class="form-control" id="comment" name="comment" rows="2"></textarea>
      </div>

      <button type="submit" class="btn btn-success">Add Key</button>
    </form>
  </div>
</div>

<script>
  function togglePasswordField() {
    const checkbox = document.getElementById("no_password_checkbox");
    const passwordField = document.getElementById("key_password");
    passwordField.disabled = checkbox.checked;
    if (checkbox.checked) {
      passwordField.value = "";
    }
  }
</script>
{% endblock %}