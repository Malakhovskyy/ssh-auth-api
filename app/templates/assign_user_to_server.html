{% extends "base.html" %}

{% block title %}Assign User to Server{% endblock %}

{% block content %}
<div class="card mb-3">
  <div class="card-body">
    <h5 class="card-title">Assign User to Server: {{ server['server_name'] }}</h5>

{% if error %}
    <div class="alert alert-danger" role="alert">
        {{ error }}
    </div>
{% endif %}

<form method="post" action="/admin/servers/assign-user/{{ server['id'] }}">
    <div class="mb-3">
      <label class="form-label">Select User:</label>
      <select name="user_id" class="form-select" required>
        {% for user in users %}
          <option value="{{ user['id'] }}" {% if assigned_user_id == user['id'] %}selected{% endif %}>{{ user['username'] }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="mb-3">
      <label class="form-label">Select SSH Key:</label>
      <select name="ssh_key_id" class="form-select" required>
        {% for key in ssh_keys %}
          <option value="{{ key['id'] }}">{{ key['key_name'] }}</option>
        {% endfor %}
      </select>
    </div>

    <button type="submit" class="btn btn-primary">Assign Selected User</button>
</form>

  </div>
</div>
<div class="mt-3">
  <a href="/admin/servers">‚Üê Back to Servers</a>
</div>

{% endblock %}